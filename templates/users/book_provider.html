{% extends 'base.html' %}

{% block title %}Book {{ provider.name }} - CareConnect{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-body p-5">
                    <h2 class="text-center mb-4">Book Service Provider</h2>

                    <div class="text-center mb-4 pb-4 border-bottom">
                        {% if provider.profile_image %}
                        <img src="{{ provider.profile_image.url }}" class="rounded-circle mb-2" width="80" height="80" alt="Profile">
                        {% endif %}
                        <h4 class="mb-0">{{ provider.name }}</h4>
                        <p class="text-muted">{{ provider.get_category_display }}</p>
                        <p><strong>Rate:</strong> à§³{{ provider.hourlyRate }}/task</p>
                    </div>
                    
                    <form method="POST">
                        {% csrf_token %}
                        <div class="mb-4">
                            <label class="form-label"><strong>Select Date & Time</strong></label>
                            <input type="datetime-local" class="form-control form-control-lg" name="dateTime" required>
                        </div>
                        <div class="mb-4">
                            <label class="form-label"><strong>Select Tasks (check all that apply)</strong></label>
                            
                            {% if provider.category == 'maid' %}
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Cleaning" id="task1">
                                    <label class="form-check-label" for="task1"> Cleaning</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Cooking" id="task2">
                                    <label class="form-check-label" for="task2"> Cooking</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Laundry" id="task3">
                                    <label class="form-check-label" for="task3"> Laundry</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Dishwashing" id="task4">
                                    <label class="form-check-label" for="task4"> Dishwashing</label>
                                </div>
                            {% elif provider.category == 'babysitter' %}
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Feeding" id="task1">
                                    <label class="form-check-label" for="task1"> Feeding</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Playing" id="task2">
                                    <label class="form-check-label" for="task2"> Playing</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Bathing" id="task3">
                                    <label class="form-check-label" for="task3"> Bathing</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Homework Help" id="task4">
                                    <label class="form-check-label" for="task4"> Homework Help</label>
                                </div>
                            {% elif provider.category == 'caregiver' %}
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Medicine Administration" id="task1">
                                    <label class="form-check-label" for="task1"> Give Medicine</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Mobility Assistance" id="task2">
                                    <label class="form-check-label" for="task2"> Mobility Assistance</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" name="tasks" value="Personal Care" id="task3">
                                    <label class="form-check-label" for="task3"> Personal Care</label>
                                </div>
                            {% endif %}
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100 btn-lg">Confirm Booking</button>
                    </form>
                    
                    <div class="text-center mt-3">
                        <a href="{% url 'provider_detail' provider.id %}" class="btn btn-outline-secondary">Cancel</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
